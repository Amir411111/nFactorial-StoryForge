<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StoryForge</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å—Ç–∏–ª–µ–π -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div class="container">
        <h1>üé≠ StoryForge</h1>

        <!-- –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –Ω–∏–∫–Ω–µ–π–º–∞ -->
        <div id="nickname-screen" class="screen">
            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º:</p>
            <input type="text" id="nickname-input" placeholder="–í–∞—à –Ω–∏–∫–Ω–µ–π–º">
            <button id="save-nickname-btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            <p id="nickname-error" class="error-message"></p> <!-- –ú–µ—Å—Ç–æ –¥–ª—è –≤—ã–≤–æ–¥–∞ –æ—à–∏–±–∫–∏ –Ω–∏–∫–∞ -->
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —ç–∫—Ä–∞–Ω–æ–≤ –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ –Ω–∏–∫–∞ -->
        <div id="main-app" class="screen hidden">
            <p id="welcome-message"></p> <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->

            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ó–∞–≥—Ä—É–∑–∫–∏ -->
            <div id="loading-indicator" class="hidden loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

            <!-- –≠–∫—Ä–∞–Ω —Å–ø–∏—Å–∫–∞ –∏—Å—Ç–æ—Ä–∏–π -->
            <div id="story-list-screen" class="screen">
                <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏</h2>
                <div id="stories-container">
                    <!-- –ò—Å—Ç–æ—Ä–∏–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—é–¥–∞ -->
                </div>
                <button id="create-story-btn">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏—Å—Ç–æ—Ä–∏—é</button>
                <button id="change-nickname-btn">–°–º–µ–Ω–∏—Ç—å –Ω–∏–∫–Ω–µ–π–º</button>
            </div>

            <!-- –≠–∫—Ä–∞–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∏—Å—Ç–æ—Ä–∏–π -->
            <div id="story-editor-screen" class="screen hidden">
                <h2>–†–µ–¥–∞–∫—Ç–æ—Ä –ò—Å—Ç–æ—Ä–∏–π</h2>
                <button id="editor-back-btn" class="back-button">‚Üê –ö —Å–ø–∏—Å–∫—É –∏—Å—Ç–æ—Ä–∏–π</button>
                <div>
                    <label for="story-title-input">–ù–∞–∑–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏:</label>
                    <input type="text" id="story-title-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏">
                </div>
                <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≥–ª–∞–≤ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ -->
                <div id="chapters-container">
                    <h3>–ì–ª–∞–≤—ã <button id="add-chapter-btn-inner" class="add-chapter-btn">+</button></h3>
                    <!-- –ì–ª–∞–≤—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Å—é–¥–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞ -->
                </div>
                <button id="save-story-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                <p id="editor-message" class="message"></p> <!-- –°–æ–æ–±—â–µ–Ω–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∞) -->
            </div>

            <!-- –≠–∫—Ä–∞–Ω —á—Ç–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–π -->
            <div id="story-reader-screen" class="screen hidden">
                <h2 id="reader-story-title"></h2> <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ–π –∏—Å—Ç–æ—Ä–∏–∏ -->
                <button id="reader-back-btn" class="back-button">‚Üê –ö —Å–ø–∏—Å–∫—É –∏—Å—Ç–æ—Ä–∏–π</button>
                <div id="reader-content">
                    <p id="reader-chapter-text"></p> <!-- –¢–µ–∫—Å—Ç —Ç–µ–∫—É—â–µ–π –≥–ª–∞–≤—ã -->
                    <!-- –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–∑–≤—É—á–∫–æ–π –≥–ª–∞–≤—ã -->
                    <div id="tts-controls" class="tts-controls hidden">
                         <h4>–û–∑–≤—É—á–∫–∞ –≥–ª–∞–≤—ã</h4>
                         <div class="tts-options">
                             <label for="tts-voice-select">–ì–æ–ª–æ—Å:</label>
                             <select id="tts-voice-select"></select>
                         </div>
                         <div class="tts-buttons">
                            <button id="tts-play-btn">‚ñ∂Ô∏è –û–∑–≤—É—á–∏—Ç—å</button>
                            <button id="tts-stop-btn" class="hidden">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                         </div>
                         <p id="tts-status" class="tts-status-message"></p> <!-- –°—Ç–∞—Ç—É—Å –æ–∑–≤—É—á–∫–∏ -->
                    </div>
                    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π -->
                    <div id="reader-actions-container">
                        <!-- –î–µ–π—Å—Ç–≤–∏—è (–∫–Ω–æ–ø–∫–∏) –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—é–¥–∞ -->
                    </div>
                </div>
            </div>

            <!-- –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è -->
            <div id="final-screen" class="screen hidden">
                <h2 id="final-story-title"></h2> <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ + "–§–∏–Ω–∞–ª" -->
                <div id="final-content">
                    <p id="final-message"></p> <!-- –¢–µ–∫—Å—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≥–ª–∞–≤—ã/—Å–æ–æ–±—â–µ–Ω–∏—è -->
                    <!-- –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–∑–≤—É—á–∫–æ–π —Ñ–∏–Ω–∞–ª–∞ -->
                    <div id="tts-final-controls" class="tts-controls hidden">
                         <h4>–û–∑–≤—É—á–∫–∞ —Ñ–∏–Ω–∞–ª–∞</h4>
                         <div class="tts-options">
                             <label for="tts-final-voice-select">–ì–æ–ª–æ—Å:</label>
                             <select id="tts-final-voice-select"></select>
                         </div>
                         <div class="tts-buttons">
                            <button id="tts-final-play-btn">‚ñ∂Ô∏è –û–∑–≤—É—á–∏—Ç—å</button>
                            <button id="tts-final-stop-btn" class="hidden">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                         </div>
                         <p id="tts-final-status" class="tts-status-message"></p> <!-- –°—Ç–∞—Ç—É—Å –æ–∑–≤—É—á–∫–∏ —Ñ–∏–Ω–∞–ª–∞ -->
                    </div>
                    <h3>–í–∞—à –ø—É—Ç—å:</h3>
                    <p id="final-path"></p> <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏ -->
                </div>
                <button id="save-playthrough-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
                <div id="final-save-status" class="message"></div> <!-- –°—Ç–∞—Ç—É—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è + —Å—Å—ã–ª–∫–∞ -->
                <button id="final-back-btn" class="back-button">‚Üê –ö —Å–ø–∏—Å–∫—É –∏—Å—Ç–æ—Ä–∏–π</button>
            </div>

            <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è -->
            <div id="view-playthrough-screen" class="screen hidden">
                <h2 id="view-playthrough-story-title">–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è</h2>
                <button id="view-back-btn" class="back-button">‚Üê –ö —Å–ø–∏—Å–∫—É –∏—Å—Ç–æ—Ä–∏–π</button>
                <!-- –û–±–ª–∞—Å—Ç—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è -->
                <div id="view-playthrough-render-area">
                     <div id="view-playthrough-details">
                         <p><strong>–ê–≤—Ç–æ—Ä –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è:</strong> <span id="view-reader-nickname"></span></p>
                         <p><strong>–ü—Ä–æ–π–¥–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è:</strong> <span id="view-original-story-title"></span></p>
                         <h3>–ü—É—Ç—å:</h3>
                         <div id="view-formatted-path">
                            <!-- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—É—Ç—å –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å—é–¥–∞ -->
                         </div>
                     </div>
                </div>
                 <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —à–∞—Ä–∏–Ω–≥–∞ -->
                <button id="download-image-btn" class="hidden">–°–∫–∞—á–∞—Ç—å –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>
                <div class="share-buttons hidden">
                    –ü–æ–¥–µ–ª–∏—Ç—å—Å—è:
                    <a href="#" class="share-twitter" target="_blank" title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ X (Twitter)">X</a>
                    <a href="#" class="share-telegram" target="_blank" title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ Telegram">Telegram</a>
                </div>
                <p id="view-playthrough-error" class="error-message"></p> <!-- –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è -->
            </div>
            <!-- –ö–æ–Ω–µ—Ü —ç–∫—Ä–∞–Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è -->

        </div> <!-- –ö–æ–Ω–µ—Ü –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ #main-app -->
    </div> <!-- –ö–æ–Ω–µ—Ü –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ .container -->

    <!-- –®–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–ª–∞–≤—ã –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ -->
    <template id="chapter-template">
        <div class="chapter-editor" data-intended-chapter-id="">
            <hr>
            <div>
                <input type="text" class="chapter-id-input" placeholder="ID –≥–ª–∞–≤—ã (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)" value="">
                <button class="set-start-chapter-btn">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞—Ä—Ç–æ–≤–æ–π</button>
            </div>
            <textarea class="chapter-text-input" placeholder="–¢–µ–∫—Å—Ç –≥–ª–∞–≤—ã..."></textarea>
            <div class="ai-buttons"> <!-- –ö–Ω–æ–ø–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å AI -->
                <button class="ai-continue-btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å AI</button>
                <button class="ai-suggest-actions-btn">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è</button>
           </div>
            <h4>–î–µ–π—Å—Ç–≤–∏—è:</h4>
            <div class="actions-editor-container"></div> <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π —ç—Ç–æ–π –≥–ª–∞–≤—ã -->
            <button class="add-action-btn">–î–æ–±–∞–≤–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ</button>
            <button class="remove-chapter-btn">–£–¥–∞–ª–∏—Ç—å –≥–ª–∞–≤—É</button>
        </div>
    </template>

    <!-- –®–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ -->
    <template id="action-template">
         <div class="action-editor">
            <input type="text" class="action-text-input" placeholder="–¢–µ–∫—Å—Ç –¥–µ–π—Å—Ç–≤–∏—è">
            <input type="text" class="action-next-chapter-input" placeholder="ID —Å–ª–µ–¥. –≥–ª–∞–≤—ã (–ø—É—Å—Ç–æ = —Ñ–∏–Ω–∞–ª)">
            <button class="remove-action-btn">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
    </template>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.13/html-to-image.min.js" integrity="sha512-iZ2ORl595Wx6miw+GuadDet4WQbdSWS3JLMoNfY8cRGoEFy6oT3G9IbcrBeL6AfkgpA51ETt/faX6yLV+/gFJg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ JavaScript –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script src="script.js"></script>
</body>
</html>